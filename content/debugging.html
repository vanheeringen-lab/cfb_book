
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>10. Debugging &#8212; NWI-BM066A Computation for Biologists</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.e2363ea40746bee74734a24ffefccd78.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="11. Introduction to pandas DataFrames" href="pandas.html" />
    <link rel="prev" title="9. Scripts" href="scripts.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">NWI-BM066A Computation for Biologists</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01_introduction.html">
   Introduction
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="first_exercises.html">
   1. First exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lists.html">
   2. Lists
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="control_flow.html">
   3. Control flow
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="loops.html">
   4. Loops
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="functions_modules.html">
   5. Functions and modules
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dictionaries.html">
   6. Dictionaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="extra_exercises.html">
   7. Assembling the pieces
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="files.html">
   8. Files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="scripts.html">
   9. Scripts
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   10. Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pandas.html">
   11. Introduction to pandas DataFrames
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="visualization.html">
   12. Visualization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dnase_motifs.html">
   13. Motifs in DNase I peaks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="footprints.html">
   14. Creating a DNAseI footprint profile
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/content/debugging.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/vanheeringen-lab/cfb_book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/vanheeringen-lab/cfb_book/issues/new?title=Issue%20on%20page%20%2Fcontent/debugging.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/vanheeringen-lab/cfb_book/edit/master/content/debugging.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/vanheeringen-lab/cfb_book/master?urlpath=tree/content/debugging.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises-debugging">
   10.1. Exercises: debugging
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="debugging">
<h1><span class="section-number">10. </span>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exercises-debugging">
<h2><span class="section-number">10.1. </span>Exercises: debugging<a class="headerlink" href="#exercises-debugging" title="Permalink to this headline">¶</a></h2>
<p><strong>Exercise 10.1</strong></p>
<p>The purpose of the following code is to count how often each TF in the network is a target of a TF in the network (it also counts if a TF regulates itself).
In other words, how many TFs in the network bind in the promoter of a given TF.</p>
<ul class="simple">
<li><p>The below code is provided in the script <code class="docutils literal notranslate"><span class="pre">exercise4_with_errors.py</span></code>.</p></li>
<li><p>Use the terminal and command line to copy the file to a new file named <code class="docutils literal notranslate"><span class="pre">my_exercise4.py</span></code>.</p></li>
<li><p>Edit the new file by clicking on it in the Jupyter browser.</p></li>
<li><p>Every time you change the file, save it.</p></li>
<li><p>Execute the Python script from the command line with <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">my_exercise4.py</span></code>.</p></li>
</ul>
<p><strong>Questions</strong></p>
<ol class="simple">
<li><p>What is the purpose of this code? (This should be obvious from the short description given above and the code itself)</p></li>
<li><p>What is the input and what is the expected output?
<strong>Answer this question before running or changing the code, but make use of the network as defined in the dictionary <code class="docutils literal notranslate"><span class="pre">hsc_network</span></code></strong>.</p></li>
<li><p>Identify the source of the runtime errors, and fix the mistake into the code so that the script runs without error.
In that case, the last line of the output should be “Finished analysis of HSC network”.</p></li>
<li><p>After you fixed the errors in the code, does the code produce the expected output?</p></li>
<li><p>What is the output (list each TF and its target frequency)?</p></li>
<li><p>How would you solve this counting problem more elegantly? Hint: e.g. by using a single dictionary to replace the list <code class="docutils literal notranslate"><span class="pre">list_of_tfs</span></code> and dictionary <code class="docutils literal notranslate"><span class="pre">tf_to_index</span></code>.</p></li>
</ol>
<p>Advice: make liberal use of <code class="docutils literal notranslate"><span class="pre">print()</span></code> statements to understand</p>
<ol class="simple">
<li><p>What each line in the code is trying to achieve</p></li>
<li><p>How to make the code function correctly, and make sure that it indeed functions correctly.</p></li>
</ol>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>There are multiple <em>bugs</em> in the code below. Some are obvious mistakes (a typo).
However, some are mistakes that do not produce runtime errors that produce an incorrect result.</p>
</div>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define HSC network from Bonzanni et al, Bioinformatics 2013</span>
<span class="n">hsc_network</span> <span class="o">=</span> <span class="p">{</span>                                <span class="c1"># each key is a source TF, the value for each key is a list of target TFs</span>
        <span class="s2">&quot;Scl&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Scl&quot;</span><span class="p">,</span><span class="s2">&quot;Gata1&quot;</span><span class="p">,</span><span class="s2">&quot;Gata2&quot;</span><span class="p">,</span><span class="s2">&quot;Hhex&quot;</span><span class="p">,</span><span class="s2">&quot;Zfpm1&quot;</span><span class="p">,</span><span class="s2">&quot;Fli1&quot;</span><span class="p">,</span><span class="s2">&quot;Erg&quot;</span><span class="p">,</span><span class="s2">&quot;Smad6&quot;</span><span class="p">,</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Eto2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Pu.1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Pu.1&quot;</span><span class="p">,</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Gata1&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Runx1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Pu.1&quot;</span><span class="p">,</span><span class="s2">&quot;Erg&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Smad6&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Runx1&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Eto2&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Erg&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Gata1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Gata1&quot;</span><span class="p">,</span><span class="s2">&quot;Scl&quot;</span><span class="p">,</span><span class="s2">&quot;Pu.1&quot;</span><span class="p">,</span><span class="s2">&quot;Gata2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Fli1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Fli1&quot;</span><span class="p">,</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Pu.1&quot;</span><span class="p">,</span><span class="s2">&quot;Scl&quot;</span><span class="p">,</span><span class="s2">&quot;Gata2&quot;</span><span class="p">,</span><span class="s2">&quot;Hhex&quot;</span><span class="p">,</span><span class="s2">&quot;Erg&quot;</span><span class="p">,</span><span class="s2">&quot;Smad6&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Erg&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Smad6&quot;</span><span class="p">,</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Erg&quot;</span><span class="p">,</span><span class="s2">&quot;Hhex&quot;</span><span class="p">,</span><span class="s2">&quot;Gata2&quot;</span><span class="p">,</span><span class="s2">&quot;Fli1&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Zfpm1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Gata2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Gata2&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Zfpm1&quot;</span><span class="p">,</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Smad6&quot;</span><span class="p">,</span><span class="s2">&quot;Eto2&quot;</span><span class="p">,</span><span class="s2">&quot;Scl&quot;</span><span class="p">,</span><span class="s2">&quot;Gata2&quot;</span><span class="p">,</span><span class="s2">&quot;Hhex&quot;</span><span class="p">,</span><span class="s2">&quot;Fli1&quot;</span><span class="p">,</span><span class="s2">&quot;Erg&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Hhex&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Gata2&quot;</span><span class="p">]</span>
        <span class="p">}</span>

<span class="n">target_frequencies</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>         <span class="c1"># How often is each TF a target of another TF?</span>
<span class="n">list_of_tfs</span> <span class="o">=</span> <span class="p">[]</span>                               <span class="c1"># list of transcription factors in the network</span>

<span class="n">tf_to_index</span> <span class="o">=</span> <span class="p">{}</span>                               <span class="c1"># dictionary linking TF name to numerical index in list</span>

<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>                                      <span class="c1"># initialize index to zero</span>
<span class="k">for</span> <span class="n">tf</span> <span class="ow">in</span> <span class="n">hsc_network</span><span class="p">:</span>
    <span class="n">list_of_tfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tf</span><span class="p">)</span>                     <span class="c1"># append tf to the list of transcription factors in the network</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># update index</span>

    <span class="n">tf_to_index</span><span class="p">[</span><span class="n">tf</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>                    <span class="c1"># associate the transcription factor tf with the index</span>


<span class="k">for</span> <span class="n">source_tf</span> <span class="ow">in</span> <span class="n">hsc_network</span><span class="p">:</span>                  <span class="c1"># iterate over TFs in the network</span>
    <span class="n">list_of_target_tfs</span> <span class="o">=</span> <span class="n">hsc_network</span><span class="p">[</span><span class="n">source_tf</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">target_tf</span> <span class="ow">in</span> <span class="n">list_of_target_tfs</span><span class="p">:</span>       <span class="c1"># iterate over all TFs that are targeted by source_tf</span>
        <span class="n">index_in_list</span> <span class="o">=</span> <span class="n">tf_to_index</span><span class="p">[</span><span class="n">target_tf</span><span class="p">]</span> <span class="c1"># retrieve list index associated with this TF</span>
        <span class="n">target_frequencies</span><span class="p">[</span><span class="n">index_in_list</span><span class="p">]</span> <span class="o">=</span> <span class="n">target_frequency</span><span class="p">[</span><span class="n">index_in_list</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>

<span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list_of_tfs</span><span class="p">)):</span>
    <span class="n">tf</span> <span class="o">=</span> <span class="n">list_of_tfs</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
    <span class="n">target_frequency_tf</span> <span class="o">=</span> <span class="n">target_frequencies</span><span class="p">[</span> <span class="n">index</span> <span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Transcription factor&quot;</span><span class="p">,</span><span class="n">tf</span><span class="p">,</span><span class="s2">&quot;is&quot;</span><span class="p">,</span><span class="n">target_frequency_tf</span><span class="p">,</span><span class="s2">&quot;times a target of another TF&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finished analysis of HSC network&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="n">e83b46195bf2</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">31</span>     <span class="k">for</span> <span class="n">target_tf</span> <span class="ow">in</span> <span class="n">list_of_target_tfs</span><span class="p">:</span>       <span class="c1"># iterate over all TFs that are targeted by source_tf</span>
<span class="g g-Whitespace">     </span><span class="mi">32</span>         <span class="n">index_in_list</span> <span class="o">=</span> <span class="n">tf_to_index</span><span class="p">[</span><span class="n">target_tf</span><span class="p">]</span> <span class="c1"># retrieve list index associated with this TF</span>
<span class="ne">---&gt; </span><span class="mi">33</span>         <span class="n">target_frequencies</span><span class="p">[</span><span class="n">index_in_list</span><span class="p">]</span> <span class="o">=</span> <span class="n">target_frequency</span><span class="p">[</span><span class="n">index_in_list</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
<span class="g g-Whitespace">     </span><span class="mi">34</span> 
<span class="g g-Whitespace">     </span><span class="mi">35</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list_of_tfs</span><span class="p">)):</span>

<span class="ne">NameError</span>: name &#39;target_frequency&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p><strong>Exercise 10.2</strong></p>
<p>The following code (provided in the file <code class="docutils literal notranslate"><span class="pre">exercise5.py</span></code>)
tests whether a particular TF of interest directly regulates itself (in other words, if a TF binds in its own promoter).
The name of the TF of interest is assigned to the variable <code class="docutils literal notranslate"><span class="pre">my_tf_of_interest</span></code>.</p>
<p>The code should print</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Transcription factor my_tf_of_interest regulates itself
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Transcription factor my_tf_of_interest does not regulate itself
</pre></div>
</div>
<p>to screen (with “my_tf_of_interest” replaced by the actual TF name), depending on whether there is a self-regulation relationship encoded in the
<code class="docutils literal notranslate"><span class="pre">hsc_network</span></code> dictionary variable or not.</p>
<p><strong>Questions</strong></p>
<ol class="simple">
<li><p>This script contains a bug (otherwise it wouldn’t be a question here). Can you identify the bug without running the code (try for at least 10 minutes)?</p></li>
<li><p>Run the code as a script from the command line in a terminal.
Does the code run without error?</p></li>
<li><p>Does the code provide the correct output for the TF named ‘Scl’?</p></li>
<li><p>Does the code provide the correct output for all TFs?
If not, how would you adapt the code (extend or change it) so that it does produce the desired output?</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Does a TF regulate itself?</span>

<span class="c1"># each key is a source TF, the value for each key is a list of target TFs</span>
<span class="n">hsc_network</span> <span class="o">=</span> <span class="p">{</span>                                
        <span class="s2">&quot;Scl&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Scl&quot;</span><span class="p">,</span><span class="s2">&quot;Gata1&quot;</span><span class="p">,</span><span class="s2">&quot;Gata2&quot;</span><span class="p">,</span><span class="s2">&quot;Hhex&quot;</span><span class="p">,</span><span class="s2">&quot;Zfpm1&quot;</span><span class="p">,</span><span class="s2">&quot;Fli1&quot;</span><span class="p">,</span><span class="s2">&quot;Erg&quot;</span><span class="p">,</span><span class="s2">&quot;Smad6&quot;</span><span class="p">,</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Eto2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Pu.1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Pu.1&quot;</span><span class="p">,</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Gata1&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Runx1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Pu.1&quot;</span><span class="p">,</span><span class="s2">&quot;Erg&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Smad6&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Runx1&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Eto2&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Erg&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Gata1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Gata1&quot;</span><span class="p">,</span><span class="s2">&quot;Scl&quot;</span><span class="p">,</span><span class="s2">&quot;Pu.1&quot;</span><span class="p">,</span><span class="s2">&quot;Gata2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Fli1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Fli1&quot;</span><span class="p">,</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Pu.1&quot;</span><span class="p">,</span><span class="s2">&quot;Scl&quot;</span><span class="p">,</span><span class="s2">&quot;Gata2&quot;</span><span class="p">,</span><span class="s2">&quot;Hhex&quot;</span><span class="p">,</span><span class="s2">&quot;Erg&quot;</span><span class="p">,</span><span class="s2">&quot;Smad6&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Erg&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Smad6&quot;</span><span class="p">,</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Erg&quot;</span><span class="p">,</span><span class="s2">&quot;Hhex&quot;</span><span class="p">,</span><span class="s2">&quot;Gata2&quot;</span><span class="p">,</span><span class="s2">&quot;Fli1&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Zfpm1&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Gata2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Gata2&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Zfpm1&quot;</span><span class="p">,</span><span class="s2">&quot;Runx1&quot;</span><span class="p">,</span><span class="s2">&quot;Smad6&quot;</span><span class="p">,</span><span class="s2">&quot;Eto2&quot;</span><span class="p">,</span><span class="s2">&quot;Scl&quot;</span><span class="p">,</span><span class="s2">&quot;Gata2&quot;</span><span class="p">,</span><span class="s2">&quot;Hhex&quot;</span><span class="p">,</span><span class="s2">&quot;Fli1&quot;</span><span class="p">,</span><span class="s2">&quot;Erg&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Hhex&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Gata2&quot;</span><span class="p">]</span>
        <span class="p">}</span>

<span class="n">my_tf_of_interest</span> <span class="o">=</span> <span class="s1">&#39;Scl&#39;</span>

<span class="k">for</span> <span class="n">target_tf</span> <span class="ow">in</span> <span class="n">hsc_network</span><span class="p">[</span><span class="n">my_tf_of_interest</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">target_tf</span> <span class="o">==</span> <span class="n">my_tf_of_interest</span><span class="p">:</span>
        <span class="n">my_tf_regulates_itself</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">if</span> <span class="n">my_tf_regulates_itself</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Transcription factor&quot;</span><span class="p">,</span><span class="n">my_tf_of_interest</span><span class="p">,</span><span class="s2">&quot;regulates itself&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Transcription factor&quot;</span><span class="p">,</span><span class="n">my_tf_of_interest</span><span class="p">,</span><span class="s2">&quot;does not regulate itself&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Transcription factor Scl regulates itself
</pre></div>
</div>
</div>
</div>
<p><strong>Exercise 10.3</strong></p>
<p>This exercise focuses on problems that may arise when an input file does not have the formatting you expect, contains errors or otherwise unexpected events.</p>
<p>For small networks it is feasible to type your network directly as a dictionary, like in the example above.
In other realistic scenarios, the network file is produced by another analysis (either your own Python script or another program), and you would like
to analyze the network produced by that program.</p>
<p>The purpose of the below code is to determine which TFs are provided in a flat text file, and count <em>how many</em> target genes each TF has.
To keep things managable, the text file contains only a small network.</p>
<p>The setting is as follows:</p>
<ul>
<li><p>We have a flat text input file containing the network links in the following format:</p>
<p>source_tf_1 target_1 target_2 target_3
source_tf_2 target_4 target_5</p>
</li>
<li><p>We want to parse the input file and count for each source_tf that occurs how many targets it has.</p></li>
<li><p>To test the correctness of our code, we provide you with an input file that has several issues that cause the program
to misbehave.</p></li>
</ul>
<p>The following code is contained in the script <code class="docutils literal notranslate"><span class="pre">exercise6.py</span></code>.
It reads a network from the file <code class="docutils literal notranslate"><span class="pre">network_exercise_6.txt</span></code>.<br />
The code contained in it is as follows:</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">target_tfs_dict</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># will contain a list of the target genes for each source gene</span>

<span class="n">input_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/vol/cursus/CFB/scripts_debugging/network_exercise_6.txt&quot;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="c1"># change path/filename if you want to run it on a different file</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">input_file</span><span class="p">:</span>
    <span class="n">entries</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">source_tf</span> <span class="o">=</span> <span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>   <span class="c1"># source TF is always the first string in a line</span>
    <span class="n">targets</span> <span class="o">=</span> <span class="n">entries</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="c1"># the strings after the first one are the target genes</span>
    <span class="n">target_tfs_dict</span><span class="p">[</span><span class="n">source_tf</span><span class="p">]</span> <span class="o">=</span> <span class="n">targets</span>

<span class="n">input_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">for</span> <span class="n">tf</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">target_tfs_dict</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Source TF:</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">tf</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Number of targets:</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">target_tfs_dict</span><span class="p">[</span><span class="n">tf</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">IndexError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">b5ec3a33a1ca</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">input_file</span><span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>     <span class="n">entries</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="ne">----&gt; </span><span class="mi">7</span>     <span class="n">source_tf</span> <span class="o">=</span> <span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>   <span class="c1"># source TF is always the first string in a line</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="n">targets</span> <span class="o">=</span> <span class="n">entries</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="c1"># the strings after the first one are the target genes</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span>     <span class="n">target_tfs_dict</span><span class="p">[</span><span class="n">source_tf</span><span class="p">]</span> <span class="o">=</span> <span class="n">targets</span>

<span class="ne">IndexError</span>: list index out of range
</pre></div>
</div>
</div>
</div>
<p>Run the script from the command line in a terminal. You can view the network file by clicking on it in the Jupyter file browser.</p>
<p><strong>Expected output</strong></p>
<p>If the script functions correctly, the desired output is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Source TF:	 Erg 	Number of targets:	 6
Source TF:	 Eto2 	Number of targets:	 1
Source TF:	 Fli1 	Number of targets:	 8
Source TF:	 Gata1 	Number of targets:	 4
Source TF:	 Gata2 	Number of targets:	 9
Source TF:	 Hhex 	Number of targets:	 1
Source TF:	 Pu.1 	Number of targets:	 3
Source TF:	 Runx1 	Number of targets:	 3
Source TF:	 Scl 	Number of targets:	 10
Source TF:	 Smad6 	Number of targets:	 1
Source TF:	 Zfpm1 	Number of targets:	 1
</pre></div>
</div>
<p><strong>Question/assignment:</strong></p>
<p>The script <code class="docutils literal notranslate"><span class="pre">exercise6.py</span></code> makes three assumptions about the input file that are not valid (the input file violates the assumption).</p>
<p>Describe at least three assumptions that this script makes about the input file and provide a script that produces the desired output.</p>
<p>For example, describe the assumptions as specifically as in the following examples (this is just an example, not relevant to this script):</p>
<ul class="simple">
<li><p>The script assumes that each line has precisely 20 characters</p></li>
<li><p>The script assumes that each line starts with a capital letter</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You have the change the Python script; you are <strong>NOT</strong> allowed to change the input file!</p>
</div>
<p><strong>Hints:</strong></p>
<ol class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">if</span></code> statements to check whether a specific assumption that you require for correct execution is satisfied.
For instance, you can use an <code class="docutils literal notranslate"><span class="pre">if</span></code> statement to check the length of a list, or whether a key is present in the dictionary.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">print()</span></code> statements to understand what each line is doing and what the value is of a variable.</p></li>
<li><p>You are allowed to change the input file to understand where the problem is, but you have to provide code that produces the correct output for the original input file.</p></li>
</ol>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="scripts.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title"><span class="section-number">9. </span>Scripts</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="pandas.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title"><span class="section-number">11. </span>Introduction to pandas DataFrames</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Simon van Heeringen, Arjen Brinkman, Kees Albers<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>